{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\thesh\\\\Desktop\\\\Authentication\\\\frontend\\\\src\\\\components\\\\Services\\\\ChatServices\\\\Friends\\\\FriendsList.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { handleError, handleSuccess } from \"../../../../utils/ReactToastify\";\nimport CryptoJS from \"crypto-js\";\nimport { fetchFriends } from '../API/FriendsAPI';\nimport '../../../../assets/style/ServicesStyle/ChatServicesStyle/FriendsList.css';\nimport socketService from '../../../../utils/socketService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst FriendsList = () => {\n  _s();\n  const [friends, setFriends] = useState(() => {\n    const savedFriends = localStorage.getItem('friendsList');\n    return savedFriends ? JSON.parse(CryptoJS.AES.decrypt(savedFriends, 'your-secret-key').toString(CryptoJS.enc.Utf8)) : [];\n  });\n  const [loading, setLoading] = useState(true);\n  const fetchFriendsData = async () => {\n    setLoading(true);\n    try {\n      const token = localStorage.getItem(\"token\");\n      const data = await fetchFriends(token);\n      console.log(\"Fetched friends data:\", data);\n      setFriends(data.friends || []);\n      const encryptedFriends = CryptoJS.AES.encrypt(JSON.stringify(data.friends), 'your-secret-key').toString();\n      localStorage.setItem('friendsList', encryptedFriends);\n    } catch (error) {\n      console.error(\"Error fetching friends:\", error);\n      handleError(\"Error fetching friends.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    fetchFriendsData();\n\n    // Listen for real-time updates\n    socketService.onFriendRequestAccepted(fetchFriendsData);\n    socketService.onFriendUnfriended(fetchFriendsData);\n    return () => {\n      socketService.off('friend_request_accepted');\n      socketService.off('friend_unfriended');\n    };\n  }, []);\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 22\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"friends-list\",\n    children: /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: friends.length > 0 ? friends.map(friend => /*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"friend-item\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: friend.profile_picture,\n          alt: `${friend.first_name} ${friend.last_name}`,\n          className: \"friend-avatar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 8\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"friend-info\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"friend-name\",\n            children: `${friend.first_name} ${friend.last_name}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"friend-username\",\n            children: friend.username\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 9\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 8\n        }, this)]\n      }, friend._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 7\n      }, this)) : /*#__PURE__*/_jsxDEV(\"li\", {\n        children: \"No friends found.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 6\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 3\n  }, this);\n};\n_s(FriendsList, \"p9c0FctLHOUPYVSwV4N4C9UBHzE=\");\n_c = FriendsList;\nexport default FriendsList;\nvar _c;\n$RefreshReg$(_c, \"FriendsList\");","map":{"version":3,"names":["React","useEffect","useState","handleError","handleSuccess","CryptoJS","fetchFriends","socketService","jsxDEV","_jsxDEV","FriendsList","_s","friends","setFriends","savedFriends","localStorage","getItem","JSON","parse","AES","decrypt","toString","enc","Utf8","loading","setLoading","fetchFriendsData","token","data","console","log","encryptedFriends","encrypt","stringify","setItem","error","onFriendRequestAccepted","onFriendUnfriended","off","children","fileName","_jsxFileName","lineNumber","columnNumber","className","length","map","friend","src","profile_picture","alt","first_name","last_name","username","_id","_c","$RefreshReg$"],"sources":["C:/Users/thesh/Desktop/Authentication/frontend/src/components/Services/ChatServices/Friends/FriendsList.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { handleError, handleSuccess } from \"../../../../utils/ReactToastify\";\r\nimport CryptoJS from \"crypto-js\";\r\nimport { fetchFriends } from '../API/FriendsAPI';\r\nimport '../../../../assets/style/ServicesStyle/ChatServicesStyle/FriendsList.css';\r\nimport socketService from '../../../../utils/socketService';\r\n\r\nconst FriendsList = () => {\r\n\tconst [friends, setFriends] = useState(() => {\r\n\t\tconst savedFriends = localStorage.getItem('friendsList');\r\n\t\treturn savedFriends ? JSON.parse(CryptoJS.AES.decrypt(savedFriends, 'your-secret-key').toString(CryptoJS.enc.Utf8)) : [];\r\n\t});\r\n\tconst [loading, setLoading] = useState(true);\r\n\r\n\tconst fetchFriendsData = async () => {\r\n\t\tsetLoading(true);\r\n\t\ttry {\r\n\t\t\tconst token = localStorage.getItem(\"token\");\r\n\t\t\tconst data = await fetchFriends(token);\r\n\t\t\tconsole.log(\"Fetched friends data:\", data);\r\n\t\t\tsetFriends(data.friends || []);\r\n\t\t\t\r\n\r\n\t\t\tconst encryptedFriends = CryptoJS.AES.encrypt(JSON.stringify(data.friends), 'your-secret-key').toString();\r\n\t\t\tlocalStorage.setItem('friendsList', encryptedFriends);\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error(\"Error fetching friends:\", error);\r\n\t\t\thandleError(\"Error fetching friends.\");\r\n\t\t} finally {\r\n\t\t\tsetLoading(false);\r\n\t\t}\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tfetchFriendsData();\r\n\r\n\t\t// Listen for real-time updates\r\n\t\tsocketService.onFriendRequestAccepted(fetchFriendsData);\r\n\t\tsocketService.onFriendUnfriended(fetchFriendsData);\r\n\r\n\t\treturn () => {\r\n\t\t\tsocketService.off('friend_request_accepted');\r\n\t\t\tsocketService.off('friend_unfriended');\r\n\t\t};\r\n\t}, []);\r\n\r\n\tif (loading) return <div>Loading...</div>;\r\n\r\n\treturn (\r\n\t\t<div className=\"friends-list\">\r\n\t\t\t<ul>\r\n\t\t\t\t{friends.length > 0 ? (\r\n\t\t\t\t\tfriends.map(friend => (\r\n\t\t\t\t\t\t<li key={friend._id} className=\"friend-item\">\r\n\t\t\t\t\t\t\t<img src={friend.profile_picture} alt={`${friend.first_name} ${friend.last_name}`} className=\"friend-avatar\" />\r\n\t\t\t\t\t\t\t<div className=\"friend-info\">\r\n\t\t\t\t\t\t\t\t<span className=\"friend-name\">{`${friend.first_name} ${friend.last_name}`}</span>\r\n\t\t\t\t\t\t\t\t<span className=\"friend-username\">{friend.username}</span>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t))\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<li>No friends found.</li>\r\n\t\t\t\t)}\r\n\t\t\t</ul>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default FriendsList;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}