{"ast":null,"code":"// // frontend/src/utils/AuthCheck.js\n// import { refreshAccessToken } from './RefreshToken';\n\n// export const checkAuth = async () => {\n//     let token = localStorage.getItem('token');\n//     if (!token) {\n//         throw new Error('Not authenticated');\n//     }\n\n//     try {\n//         // Optionally verify the token expiration and refresh if needed\n//         const decodedToken = jwt.decode(token);\n//         const isExpired = decodedToken.exp * 1000 < Date.now();\n\n//         if (isExpired) {\n//             await refreshAccessToken();\n//             token = localStorage.getItem('token'); // Get the new token\n//         }\n\n//         return token;\n//     } catch (err) {\n//         await refreshAccessToken();\n//         token = localStorage.getItem('token'); // Get the new token\n//         return token;\n//     }\n// };\n\n// frontend/src/utils/AuthCheck.js\nimport jwt from 'jsonwebtoken';\nimport { refreshAccessToken } from './RefreshToken';\nexport const checkAuth = async () => {\n  let token = localStorage.getItem('token');\n  if (!token) {\n    throw new Error('Not authenticated');\n  }\n  try {\n    // Optionally verify the token expiration and refresh if needed\n    const decodedToken = jwt.decode(token);\n    const isExpired = decodedToken.exp * 1000 < Date.now();\n    if (isExpired) {\n      await refreshAccessToken();\n      token = localStorage.getItem('token'); // Get the new token\n    }\n    return token;\n  } catch (err) {\n    await refreshAccessToken();\n    token = localStorage.getItem('token'); // Get the new token\n    return token;\n  }\n};","map":{"version":3,"names":["jwt","refreshAccessToken","checkAuth","token","localStorage","getItem","Error","decodedToken","decode","isExpired","exp","Date","now","err"],"sources":["C:/Users/thesh/Desktop/LOGIN_SINGUP - Copy/LOGIN_SINGUP - Copy/frontend/src/utils/AuthCheck.js"],"sourcesContent":["// // frontend/src/utils/AuthCheck.js\r\n// import { refreshAccessToken } from './RefreshToken';\r\n\r\n// export const checkAuth = async () => {\r\n//     let token = localStorage.getItem('token');\r\n//     if (!token) {\r\n//         throw new Error('Not authenticated');\r\n//     }\r\n\r\n//     try {\r\n//         // Optionally verify the token expiration and refresh if needed\r\n//         const decodedToken = jwt.decode(token);\r\n//         const isExpired = decodedToken.exp * 1000 < Date.now();\r\n        \r\n//         if (isExpired) {\r\n//             await refreshAccessToken();\r\n//             token = localStorage.getItem('token'); // Get the new token\r\n//         }\r\n\r\n//         return token;\r\n//     } catch (err) {\r\n//         await refreshAccessToken();\r\n//         token = localStorage.getItem('token'); // Get the new token\r\n//         return token;\r\n//     }\r\n// };\r\n\r\n\r\n\r\n// frontend/src/utils/AuthCheck.js\r\nimport jwt from 'jsonwebtoken';\r\nimport { refreshAccessToken } from './RefreshToken';\r\n\r\nexport const checkAuth = async () => {\r\n    let token = localStorage.getItem('token');\r\n    if (!token) {\r\n        throw new Error('Not authenticated');\r\n    }\r\n\r\n    try {\r\n        // Optionally verify the token expiration and refresh if needed\r\n        const decodedToken = jwt.decode(token);\r\n        const isExpired = decodedToken.exp * 1000 < Date.now();\r\n        \r\n        if (isExpired) {\r\n            await refreshAccessToken();\r\n            token = localStorage.getItem('token'); // Get the new token\r\n        }\r\n\r\n        return token;\r\n    } catch (err) {\r\n        await refreshAccessToken();\r\n        token = localStorage.getItem('token'); // Get the new token\r\n        return token;\r\n    }\r\n};\r\n"],"mappings":"AAAA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAIA;AACA,OAAOA,GAAG,MAAM,cAAc;AAC9B,SAASC,kBAAkB,QAAQ,gBAAgB;AAEnD,OAAO,MAAMC,SAAS,GAAG,MAAAA,CAAA,KAAY;EACjC,IAAIC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EACzC,IAAI,CAACF,KAAK,EAAE;IACR,MAAM,IAAIG,KAAK,CAAC,mBAAmB,CAAC;EACxC;EAEA,IAAI;IACA;IACA,MAAMC,YAAY,GAAGP,GAAG,CAACQ,MAAM,CAACL,KAAK,CAAC;IACtC,MAAMM,SAAS,GAAGF,YAAY,CAACG,GAAG,GAAG,IAAI,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC;IAEtD,IAAIH,SAAS,EAAE;MACX,MAAMR,kBAAkB,CAAC,CAAC;MAC1BE,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC;IAC3C;IAEA,OAAOF,KAAK;EAChB,CAAC,CAAC,OAAOU,GAAG,EAAE;IACV,MAAMZ,kBAAkB,CAAC,CAAC;IAC1BE,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC;IACvC,OAAOF,KAAK;EAChB;AACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}